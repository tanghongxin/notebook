# 数据库

## 设计原则

若数据表某个字段内容，存放的是文件，可以只存储文件路径

1. 从数据库读取文件，会先把内容读取到内存中，再传输，会造成内存瞬间提升；直接读文件是从硬盘上读（内存会轻松？）
2. 只要文件不被删除，或同步更新，存放一处或两处并无区别

## TODO
- 非主键索引（非索引）→ 主键 → 行
- 数据库设计为B+树
- 流式读写可能需要磁盘→网络（Kafka）
- 读写分离（写入+同步数据）优于读写
- 分布式缓存需保证只有一个缓存入口（redis）
- 实时性不强的数据可以设置过期时间，过期时间内不进行数据库查询
- 机械硬盘查询一条与查询多条的消耗一致？
- 常规数据流向：磁盘→内核→内存→网络，部分中间件可以不需要内存这一步
- 缓存一般也是有本地持久化（redis），存储为二进制可直接读入内存（类似推入栈？）