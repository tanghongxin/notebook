# Database

[设计原则](Database%20710d913215384c96a0ede3a773baee3c/%E8%AE%BE%E8%AE%A1%E5%8E%9F%E5%88%99%20e8dcb4d45a6643f880df871619618906.md)

- 非主键索引（非索引）→ 主键 → 行
- 数据库设计为B+树
- 流式读写可能需要磁盘→网络（Kafka）
- 读写分离（写入+同步数据）优于读写
- 分布式缓存需保证只有一个缓存入口（redis）
- 实时性不强的数据可以设置过期时间，过期时间内不进行数据库查询
- 机械硬盘查询一条与查询多条的消耗一致？
- 常规数据流向：磁盘→内核→内存→网络，部分中间件可以不需要内存这一步
- 缓存一般也是有本地持久化（redis），存储为二进制可直接读入内存（类似推入栈？）